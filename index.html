<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Service Desk Inbox Simulation</title>
<style>
  body {
    font-family: Arial, sans-serif;
    display: flex;
    height: 100vh;
    margin: 0;
  }
  #sidebar {
    width: 30%;
    background: #f1f3f6;
    border-right: 1px solid #ccc;
    overflow-y: auto;
  }
  #sidebar h2 {
    text-align: center;
    padding: 10px;
  }
  .email-item {
    padding: 10px;
    border-bottom: 1px solid #ddd;
    cursor: pointer;
  }
  .email-item:hover {
    background: #e6e9ef;
  }
  .email-subject {
    font-weight: bold;
  }
  .email-tag {
    display: inline-block;
    background: #007bff;
    color: white;
    padding: 2px 6px;
    border-radius: 5px;
    font-size: 0.7em;
    margin-left: 8px;
  }
  .priority-tag {
    display: inline-block;
    background: #ff9800;
    color: white;
    padding: 2px 5px;
    border-radius: 5px;
    font-size: 0.7em;
    margin-left: 4px;
  }
  #content {
    flex: 1;
    padding: 20px;
  }
  .actions {
    margin-top: 20px;
    border-top: 1px solid #ccc;
    padding-top: 10px;
  }
  select, button {
    margin-right: 10px;
    padding: 5px;
  }
  .saved {
    color: green;
    font-weight: bold;
  }
</style>
</head>
<body>

<div id="sidebar">
  <h2>Inbox</h2>
  <div id="email-list"></div>
</div>

<div id="content">
  <h2>Service Desk - Hochschule Bonn-Rhein-Sieg</h2>
  <div id="email-content"></div>
</div>

<script>
const emails = [
  {
    id: 1,
    sender: "hoan.vu@h-brs.de",
    subject: "Eduroam funktioniert nicht",
    body: "Sehr geehrte Damen und Herren,<br><br>ich konnte seit 13.12.2025 mit meinem Handy keine Verbindung mehr mit dem Eduroam herstellen. Bei jedem Verbindungsversuch erscheint ein Netzwerkfehler. Ich habe bereits überprüft, dass meine Anmeldedaten korrekt sind und es mit meinem Laptop funktioniert.<br><br>" +
    "Matrikel-Nummer: hvu2s<br>Benutzer: hoan.vu@h-brs.de<br>Netzwerkgerät: Iphone 7<br>Betriebssystem: iOS 5<br><br>" +
     "Ich wäre Ihnen sehr dankbar, wenn Sie mir zeitnah bei der Lösung des Problems helfen könnten. Vielen Dank im Voraus für Ihre Unterstützung.<br><br>Mit freundlichen Grüßen<br>Hoan Vu",
  },
  // Add more email objects as needed
  {
    id: 2,
    sender: "test1",
    subject: "test1",
    body: "test1",
  },
  {
    id: 3,
    sender: "test2",
    subject: "test2",
    body: "test2",
  }
];

const topics = ["Konto", "Netzwerk", "Hardware", "Software", "Bewerbung", "Sonstiges", "Gelöst"];

const emailListDiv = document.getElementById("email-list");
const emailContentDiv = document.getElementById("email-content");

function renderEmailList() {
  emailListDiv.innerHTML = "";
  emails.forEach(email => {
    const item = document.createElement("div");
    item.className = "email-item";
    item.onclick = () => openEmail(email);

    // subject line
    const subjectDiv = document.createElement("div");
    subjectDiv.className = "email-subject";
    subjectDiv.textContent = email.subject;

    // topic tag (if saved)
    if (email.topic) {
      const tag = document.createElement("span");
      tag.className = "email-tag";
      tag.textContent = email.topic;
      subjectDiv.appendChild(tag);
    }

    // priority tag (if saved)
    if (email.priority) {
      const pTag = document.createElement("span");
      pTag.className = "priority-tag";
      pTag.textContent = "P" + email.priority;
      subjectDiv.appendChild(pTag);
    }

    item.appendChild(subjectDiv);
    emailListDiv.appendChild(item);
  });
}

function openEmail(email) {
  emailContentDiv.innerHTML = `
    <h3>${email.subject}</h3>
    <p><strong>Von:</strong> ${email.sender}</p>
    <p>${email.body}</p>
    <div class="actions">
      <label>Thema: </label>
      <select id="topic-${email.id}">
        <option value="">Thema auswählen</option>
        ${topics.map(t => `<option value="${t}" ${email.topic === t ? "selected" : ""}>${t}</option>`).join("")}
      </select>
      <label>Priorität: </label>
      <select id="priority-${email.id}">
        <option value="">Auswählen</option>
        <option value="1" ${email.priority === "1" ? "selected" : ""}>1 - Hoch</option>
        <option value="2" ${email.priority === "2" ? "selected" : ""}>2 - Normal</option>
        <option value="3" ${email.priority === "3" ? "selected" : ""}>3 - Niedrig</option>
        <option value="0" ${email.priority === "0" ? "selected" : ""}>0 - Keine</option>
      </select>
      <button onclick="saveEmail(${email.id})">Save</button>
      <span id="saved-${email.id}" class="saved"></span>
    </div>
  `;
}

function saveEmail(id) {
  const topic = document.getElementById(`topic-${id}`).value;
  const priority = document.getElementById(`priority-${id}`).value;
  if (!topic || !priority) {
    alert("Please select both topic and priority before saving.");
    return;
  }
  const email = emails.find(e => e.id === id);
  email.topic = topic;
  email.priority = priority;
  document.getElementById(`saved-${id}`).textContent = "✓ Saved!";
  setTimeout(() => {
    document.getElementById(`saved-${id}`).textContent = "";
  }, 1000);
  renderEmailList(); // update sidebar immediately
}

renderEmailList();
</script>

</body>
</html>
